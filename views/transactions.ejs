<!DOCTYPE html>
<html lang="fr">
<head>
    <%- include('partials/head', { title: 'Transactions - Tah Prod' }) %>
</head>
<body>
    <%- include('partials/navbar') %>

    <main class="main-content">
        <div class="form-container container-extra-wide">
            <h1 class="form-title">My Transactions</h1>
            <%- include('partials/messages') %>

            <div class="info-box">
                <div class="flex flex-justify-between flex-align-center mb-1">
                    <div>
                        <p class="text-large mb-half">
                            <strong>Current Balance:</strong> <%= balance.toFixed(2) %> â‚¬
                        </p>
                        <% if (pendingCount > 0) { %>
                            <p class="text-small color-fg opacity-80">
                                (<%= pendingCount %> pending transaction<%= pendingCount > 1 ? 's' : '' %>)
                            </p>
                        <% } %>
                    </div>
                    <div>
                        <a href="/transactions/new" class="btn">Create Transaction</a>
                    </div>
                </div>

                <div class="mb-1 flex flex-gap-1">
                    <a
                        href="/transactions"
                        class="btn btn-small <%= !statusFilter ? 'btn-active' : '' %>"
                    >
                        All
                    </a>
                    <a
                        href="/transactions?status=pending"
                        class="btn btn-small <%= statusFilter === 'pending' ? 'btn-active' : '' %>"
                    >
                        Pending
                    </a>
                    <a
                        href="/transactions?status=validated"
                        class="btn btn-small <%= statusFilter === 'validated' ? 'btn-active' : '' %>"
                    >
                        Validated
                    </a>
                </div>

                <%- include('partials/transaction-table', {
                    transactions,
                    showBandColumn: false,
                    detailUrlPrefix: '/transactions'
                }) %>
            </div>
        </div>
    </main>

    <%- include('partials/footer') %>
</body>
</html>
