<nav class="navbar">
    <div class="nav-container">
        <a href="/" class="nav-brand">TAH PROD</a>
        <div class="nav-links">
            <% if (user) { %>
                <% if (hasRole(ROLES.ADMIN)) { %>
                    <a href="/bands" class="nav-link <%= req.path === '/bands' ? 'active' : '' %>">Bands</a>
                    <%
                    const adminDropdownItems = [
                        { name: 'Transactions', href: '/admin/transactions' },
                        { name: 'Qonto', href: '/admin/qonto' },
                        { name: 'Reconciliation', href: '/admin/reconciliation' }
                    ];
                    const dropdownCurrentPath = typeof req !== 'undefined' ? req.path : '';
                    %>
                    <%- include('nav-dropdown', { items: adminDropdownItems, currentPath: dropdownCurrentPath }) %>
                    <%
                    const configDropdownItems = [
                        { name: 'Config', href: '/config' },
                        { name: 'Users', href: '/admin/users' }
                    ];
                    %>
                    <%- include('nav-dropdown', { items: configDropdownItems, currentPath: dropdownCurrentPath }) %>
                <% } else if (hasRole(ROLES.BAND)) { %>
                    <a href="/transactions" class="nav-link <%= req.path === '/transactions' ? 'active' : '' %>">Transactions</a>
                    <a href="/account" class="nav-link <%= req.path === '/account' ? 'active' : '' %>">My Account</a>
                <% } %>
                <a href="/logout" class="nav-link">Disconnect</a>
            <% } else { %>
                <a href="/login" class="nav-link">Login</a>
            <% } %>
        </div>
    </div>
</nav>
<script src="/js/nav-dropdown.js"></script>
